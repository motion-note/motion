import{P as h,n as x,R as i,G as y,S as v,q as j,o as C,s as b}from"./logType-DSjuTotS.js";import{r as V}from"./index-E4bESRg2.js";var k=V();const w=h(k),M={modelValue:String,mode:String,name:{type:String,default:"codemirror5"},placeholder:{type:String,default:""},options:{type:Object,default:()=>({})},focus:{type:Boolean,default:!1},editable:{type:Boolean,default:!0}},p={c:"text/x-csrc","c++":"text/x-c++src",css:"text/css",less:"text/x-less",scss:"text/x-scss",gss:"text/x-gss","objective-c":"text/x-objectivec",scala:"text/x-scala",java:"text/x-java",ceylon:"text/x-ceylon",kotlin:"text/x-kotlin",ts:"text/typescript",js:"text/javascript",json:"text/javascript",jsx:"text/jsx",markdown:"text/x-markdown",html:"text/html",diff:"text/x-diff",go:"text/x-go","html/php":"application/x-httpd-php",php:"text/x-php",vue:"text/x-vue",sh:"text/x-sh",sql:"text/x-sql",dart:"application/dart",rust:"text/x-rustsrc",python:"text/x-python",dockerfile:"text/x-dockerfile",jave:"text/x-java",nginx:"text/x-nginx-conf",swift:"text/x-swift",lua:"text/x-lua"},E=n=>{const l=function(e,r,a){return n("getCursor",{...e.doc.getCursor(),keyCode:r,key:a,count:e.doc.lineCount()}),"CodeMirror.Pass"},u=/mac/i.test(navigator.userAgent),o=e=>(n("ModEnter",e),"CodeMirror.Pass"),s={Tab:e=>{const r=Array(e.getOption("indentUnit")+1).join(" ");e.replaceSelection(r)},Up:e=>l(e,38,"ArrowUp"),Down:e=>l(e,40,"ArrowDown"),Backspace:e=>{if(e.getValue())return"CodeMirror.Pass";n("empty")}};return s[u?"Cmd-Enter":"Ctrl-Enter"]=o,s},O=["name","placeholder"],B={__name:"index",props:M,emits:["update:modelValue","blur","getCursor","empty","ModEnter"],setup(n,{emit:l}){const u=window.CodeMirror||w,o=n,s=l;let e=null;const r=x(null),a=x(""),m=x(null);i(()=>o.focus,t=>{t&&e&&e.focus()}),i(()=>o.mode,t=>{e&&e.setOption("mode",p[t])}),i(()=>o.modelValue,t=>{g(t)}),i(()=>o.editable,t=>{e&&e.setOption("readOnly",t&&"nocursor")}),y(()=>{f()}),v(()=>{if(console.warn("codeMirror unmounted..."),!e)return;const t=e.doc.cm.getWrapperElement();t&&t.remove&&t.remove()});function f(){const t=Object.assign({tabSize:2,theme:"eclipse",readOnly:o.editable?"nocursor":o.editable},o.options);e=u.fromTextArea(r.value,t),e.setValue(o.modelValue),e.setOption("mode",p[o.mode]),e.setOption("extraKeys",E(s)),e.on("change",c=>{a.value=c.getValue(),s("update:modelValue",a.value)}),e.on("blur",c=>{s("blur",!1)}),o.focus&&e.focus()}function g(t){const c=e.getValue();if(t!==c){const d=e.getScrollInfo();e.setValue(t),a.value=t,e.scrollTo(d.left,d.top)}}return(t,c)=>(C(),j("div",{ref_key:"el",ref:m,class:"vue-codemirror-5"},[b("textarea",{ref_key:"textarea",ref:r,name:t.name,placeholder:t.placeholder},null,8,O)],512))}};export{B as default};
